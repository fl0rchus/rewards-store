(this["webpackJsonpstore-quinteros-florencia"]=this["webpackJsonpstore-quinteros-florencia"]||[]).push([[0],{35:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),r=n.n(s),a=n(5),i=n.n(a),o=n(2),l=n(6),j=(n(35),function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"jumbotron jumbotron-fluid",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h1",{className:"display-4",children:"Rewards Store"}),Object(c.jsx)("p",{className:"lead",children:e.subtitle})]})})})}),d=n(3),u=n.n(d),b=n(4),h={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MDBmNTI2MTdlNzE4NzAwMjBlMzhlZTQiLCJpYXQiOjE2MTE2MTY4NjV9.66smQBQU8yIdqHDJyl9efNAbdagrgh9iU7Jf-KSKfXw"},O="https://coding-challenge-api.aerolab.co/user/me",m="https://coding-challenge-api.aerolab.co/user/points",x="https://coding-challenge-api.aerolab.co/redeem",f=function(){return Object(c.jsxs)("div",{className:"spinner",children:[Object(c.jsx)("div",{className:"double-bounce1"}),Object(c.jsx)("div",{className:"double-bounce2"})]})},p=function(e){var t=e.history;return e.loading?Object(c.jsx)(f,{}):Object(c.jsx)("div",{className:"container mt-5 mb-5",children:Object(c.jsxs)("table",{className:"table table-striped",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"ID"}),Object(c.jsx)("th",{scope:"col",children:"Product name"}),Object(c.jsx)("th",{scope:"col",children:"Cost"})]})}),Object(c.jsx)("tbody",{children:t.map((function(e){return Object(c.jsxs)("tr",{scope:"row",children:[Object(c.jsx)("td",{children:e.productId}),Object(c.jsx)("td",{children:e.name}),Object(c.jsx)("td",{children:e.cost})]})}))})]})})},g=function(e){for(var t=e.itemsPerPage,n=e.totalHistory,s=e.paginate,r=[],a=1;a<=Math.ceil(n/t);a++)r.push(a);return Object(c.jsx)("nav",{style:{marginTop:"2rem"},children:Object(c.jsx)("ul",{className:"pagination d-flex flex-wrap justify-content-center",children:r.map((function(e){return Object(c.jsx)("li",{className:"page-item mb-1 mr-1",children:Object(c.jsx)("button",{type:"button",className:"page-link bg-light text-dark font-weight-bold",onClick:function(){return s(e)},children:e})},e)}))})})};var v=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),i=Object(o.a)(a,2),l=i[0],j=i[1],d=Object(s.useState)(1),O=Object(o.a)(d,2),m=O[0],x=O[1],f=Object(s.useState)(20),v=Object(o.a)(f,2),y=v[0];v[1],Object(s.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/history",{method:"GET",headers:h});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r(n),j(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var N=m*y,w=N-y,C=n.slice(w,N);return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(p,{history:C,loading:l}),Object(c.jsx)(g,{totalHistory:n.length,itemsPerPage:y,paginate:function(e){return x(e)}})]})};function y(){return Object(c.jsx)("div",{className:"nav d-flex justify-content-around navbar",children:Object(c.jsx)(l.a,{to:"/rewards-store",style:{color:"#2a2a2a"},children:Object(c.jsxs)("div",{children:[Object(c.jsx)("i",{class:"fas fa-home",style:{color:"#ff8800",marginRight:5}}),"Home"]})})})}var N=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(y,{}),Object(c.jsx)(j,{subtitle:"Redeem History"}),Object(c.jsx)(v,{})]})},w=n(12),C=n.p+"static/media/coin.b8bc711d.svg",S=n(13);function P(){return(P=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O,{method:"GET",headers:h});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var k=function(){return P.apply(this,arguments)};function I(){return(I=Object(b.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m,{method:"POST",headers:h,body:JSON.stringify({amount:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var E=function(e){return I.apply(this,arguments)};function T(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useContext)($).setUserPoints,i=Object(s.useState)(!1),l=Object(o.a)(i,2),j=l[0],d=l[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"btns-container",children:[Object(c.jsx)("button",{onClick:function(){return E(1e3).then((function(e){return r(e.message),a(e["New Points"]),d(!0)})).then((function(){return d(!1)}))},className:"btn btn-warning",id:"btn-coins",children:"1000"}),Object(c.jsx)("button",{onClick:function(){return E(5e3).then((function(e){return r(e.message),a(e["New Points"]),d(!0)})).then((function(){return d(!1)}))},className:"btn btn-warning",id:"btn-coins",children:"5000"}),Object(c.jsx)("button",{onClick:function(){return E(7500).then((function(e){return r(e.message),a(e["New Points"]),d(!0)})).then((function(){return d(!1)}))},className:"btn btn-warning",id:"btn-coins",children:"7500"})]}),Object(c.jsx)("p",{style:{textAlign:"center",fontWeight:"bold",marginTop:15},children:1==j?Object(c.jsx)(f,{}):Object(c.jsx)("p",{className:"text-success",children:n})})]})}var J=document.getElementById("modal-addCoins");var M=function(e){var t=e.isOpen,n=e.hide;return t?Object(a.createPortal)(Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"modal_container",children:Object(c.jsx)("div",{className:"modal-dialog",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",children:"Add more coins"}),Object(c.jsx)("button",{type:"button",className:"close",onClick:n,children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body",children:Object(c.jsx)(T,{})})]})})})}),J):null},U=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return{isOpen:n,toggle:function(){c(!n)}}};function R(){var e=Object(w.a)(["\n  width: 60%;\n  height: 48px;\n  justify-content: space-around;\n  align-items: center;\n  background-color: #ededed;\n  border-radius: 50px;\n  display: flex;\n  padding: 10px;\n"]);return R=function(){return e},e}function F(){var e=Object(w.a)(["\n  font-weight: 500;\n  width: 12%;\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  color: #0d0d0d;\n"]);return F=function(){return e},e}function A(){var e=Object(w.a)(["\n  font-weight: 300;\n  &:hover {\n    cursor: pointer;\n  }\n"]);return A=function(){return e},e}var B=S.a.div(A()),H=S.a.div(F()),L=S.a.div(R());var z=function(){var e=Object(s.useContext)($),t=e.userName,n=e.userPoints,r=e.setUserName,a=e.setUserPoints,i=U(),o=i.isOpen,j=i.toggle;return Object(s.useEffect)((function(){k().then((function(e){return r(e.name),a(e.points)}))}),[]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"nav d-flex justify-content-around navbar",children:[Object(c.jsxs)("div",{className:"header__actions d-flex justify-content-between",style:{width:"20%"},children:[Object(c.jsxs)(B,{onClick:j,children:[Object(c.jsx)("i",{className:"fas fa-plus-circle coin",style:{color:"#ffcf00",marginRight:5}}),"Add more coins"]}),Object(c.jsx)(M,{isOpen:o,hide:j}),Object(c.jsx)(l.a,{to:"/redeem-history",style:{color:"#2a2a2a"},children:Object(c.jsxs)(B,{children:[Object(c.jsx)("i",{className:"fas fa-history history",style:{color:"#ff8800",marginRight:5}}),"Redeem history"]})})]}),Object(c.jsxs)(H,{children:[null!=t?t:"",Object(c.jsxs)(L,{children:[""!=n?n:"",Object(c.jsx)("img",{src:C,alt:"Coin"})]})]})]})})};function Q(){return(Q=Object(b.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(x,{method:"POST",headers:h,body:JSON.stringify({productId:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var _=function(e){return Q.apply(this,arguments)},G=document.getElementById("modal-addCoins"),Y=function(e){var t=e.isOpen,n=e.hide,r=e.id,i=e.producto,l=Object(s.useState)(""),j=Object(o.a)(l,2),d=j[0],u=j[1],b=Object(s.useState)(!1),h=Object(o.a)(b,2),O=h[0],m=h[1],x=Object(s.useState)(""),p=Object(o.a)(x,2),g=p[0],v=p[1],y=Object(s.useContext)($),N=y.userPoints,w=y.setUserPoints;return t?Object(a.createPortal)(Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"modal_container modal-redeem",children:Object(c.jsx)("div",{className:"modal-dialog",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",children:"Redeem"}),Object(c.jsx)("button",{type:"button",className:"close",onClick:function(){n(),u("")},children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsxs)("div",{className:"modal-body",children:["Are you sure?",Object(c.jsxs)("div",{className:"btns",id:"btns",children:[Object(c.jsx)("button",{className:"btn btn-warning mt-3",type:"button",onClick:function(){try{_(r).then((function(e){return u(e.message),m(!0),N<i.cost?w(N):w(N-i.cost),v(e.error)})).then((function(){return m(!1)}))}catch(g){v(g)}},children:"Yes!"}),Object(c.jsx)("button",{className:"btn btn-warning mt-3",type:"button",onClick:n,children:"Mmm no"})]}),1==O?Object(c.jsx)(f,{}):Object(c.jsx)("p",{className:d?"text-success mt-3":"text-danger mt-3",children:d||g})]})]})})})}),G):null},q=function(e){var t=e.data,n=e.loading,r=Object(s.useState)(""),a=Object(o.a)(r,2),i=a[0],l=(a[1],U()),j=l.isOpen,d=l.toggle,u=Object(s.useContext)($).userPoints,b=Object(s.useState)(""),h=Object(o.a)(b,2),O=h[0],m=h[1],x=Object(s.useState)([]),p=Object(o.a)(x,2),g=p[0],v=p[1];return n?Object(c.jsx)(f,{}):Object(c.jsx)("div",{className:"cards-container",children:Object(c.jsxs)("div",{className:"card",style:{width:"18rem"},children:[Object(c.jsx)("img",{className:"card-img-top",src:t.img.hdUrl,alt:t.name}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:t.name}),Object(c.jsx)("h6",{className:"card-subtitle mb-2 font-weight-light",children:t.category}),Object(c.jsxs)("p",{className:"card-text",children:[t.cost," ",Object(c.jsx)("i",{className:"fas fa-coins",style:{color:"#ffa900"}})]}),Object(c.jsx)("button",{className:"btn btn-card",type:"button",onClick:function(){m(t._id),v(t),d()},id:"btn-redeem",disabled:t.cost>u,children:t.cost>=u?"You need ".concat(t.cost-u," points"):"Redeem Now"})]}),Object(c.jsx)(Y,{isOpen:j,hide:d,message:i,id:O,producto:g})]})})};function D(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=(t[0],t[1]),r=Object(s.useState)(!1),a=Object(o.a)(r,2),i=a[0],l=a[1],j=Object(s.useState)(1),d=Object(o.a)(j,2),O=d[0],m=d[1],x=Object(s.useState)(16),f=Object(o.a)(x,2),p=f[0],v=(f[1],Object(s.useContext)($)),y=v.setProductsList,N=v.productsList,w=v.category;Object(s.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:h});case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,n(c),l(!1),y(c);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var C=O*p,S=C-p,P=[];N.forEach((function(e){""!=w.category&&w.category!=e.category||P.push(e)}));var k=P.slice(S,C),I=function(e){return m(e)},E=Math.ceil(P.length/p);return P.length&&O>E&&I(E),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"container",style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",justifyContent:"center"},children:k.map((function(e,t){return Object(c.jsx)(q,{data:e,loading:i},"".concat(e,"-").concat(t))}))}),Object(c.jsx)("hr",{}),Object(c.jsx)(g,{totalHistory:P.length,itemsPerPage:p,paginate:I})]})}var X=n(23),K=n(11),V=n(16),W=function(){var e=Object(s.useContext)($),t=e.productsList,n=e.setCategory;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"container mt-5",children:[Object(c.jsxs)("div",{className:"form-group",style:{width:"20%"},children:[Object(c.jsx)("label",{className:"font-weight-bold",children:"Filter by category:"}),Object(c.jsxs)("select",{className:"custom-select custom-select-sm form-control",name:"category",value:t.category,onChange:function(e){var c=e.target.value;n(Object(V.a)(Object(V.a)({},t),{},Object(K.a)({},e.target.name,c)))},children:[Object(c.jsx)("option",{value:"",children:"Select category"}),Object(X.a)(new Set(t.map((function(e){return e.category})))).sort().map((function(e,t){return Object(c.jsx)("option",{value:e,children:e},"".concat(e,"-").concat(t))}))]})]}),Object(c.jsx)("hr",{})]})})},Z=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(z,{}),Object(c.jsx)(j,{subtitle:"Electronics"}),Object(c.jsx)(W,{}),Object(c.jsx)(D,{})]})},$=Object(s.createContext)();var ee=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(""),i=Object(o.a)(a,2),j=i[0],d=i[1],u=Object(s.useState)([]),b=Object(o.a)(u,2),h=b[0],O=b[1],m=Object(s.useState)({category:""}),x=Object(o.a)(m,2),f=x[0],p=x[1];return Object(c.jsx)($.Provider,{value:{userName:n,setUserName:r,userPoints:j,setUserPoints:d,productsList:h,setProductsList:O,category:f,setCategory:p},children:Object(c.jsxs)(l.b,{children:[Object(c.jsx)(N,{exact:!0,path:"/redeem-history"}),Object(c.jsx)(Z,{exact:!0,path:"/rewards-store"})]})})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(ee,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.10aa7a3c.chunk.js.map